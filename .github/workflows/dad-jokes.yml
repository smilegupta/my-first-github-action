name: Dad Jokes
on:
  pull_request:
    types:
      - opened

jobs:
  dad-jokes:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '14'

      - name: Install dependencies
        run: npm install axios

      - name: Run Dad Jokes Action
        uses: mshick/add-pr-comment@v2
         with:
          message:
            script: |
              const axios = require('axios');
              const url = 'https://icanhazdadjoke.com/';
              const config = {
                headers: {
                  'Accept': 'application/json'
                }
              };
              axios.get(url, config)
                .then(response => {
                  console.log(response.data.joke);
                  return response.data.joke;
                })
                .catch(error => {
                  console.log(error);
                });
